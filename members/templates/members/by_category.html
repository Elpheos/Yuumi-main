{% extends "master.html" %}
{% load static %}

{% block title %}
Commerces Ã  {{ ville }} | {{ category }}
{% endblock %}

{% block content %}

<style>
/* ------------------------------------------------------------ */
/* ðŸ”¸ Grille des commerces (style Yuumi) */
/* ------------------------------------------------------------ */
.derniers-arrivants-grid-container {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 20px;
    width: 90%;
    margin: 32px auto 0 auto;
}

/* ------------------------------------------------------------ */
/* ðŸ”¸ Cartes commerces */
/* ------------------------------------------------------------ */
.derniers-arrivants-grid-commerces {
    text-align: center;
    background-color: #ff8b38;
    padding: 0;
    padding-bottom: 20px;
    border-radius: 6px;
    overflow: hidden;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.derniers-arrivants-grid-commerces:hover {
    transform: translateY(-4px);
    box-shadow: 0 6px 14px rgba(0,0,0,0.15);
}

/* Images */
.derniers-arrivants-grid-commerces img {
    width: 100%;
    height: 150px;
    object-fit: cover;
    border-bottom: 4px solid white;
}

/* Lien */
.derniers-arrivants-grid-commerces a {
    text-decoration: none;
}

/* Titre dans la carte */
.derniers-arrivants-grid-commerces h4 {
    color: white;
    margin-top: 12px;
    font-weight: 600;
    font-size: 1rem;
}

/* ------------------------------------------------------------ */
/* ðŸ”¸ Responsive */
/* ------------------------------------------------------------ */
@media (max-width: 1200px) {
    .derniers-arrivants-grid-container {
        grid-template-columns: repeat(4, 1fr);
    }
}
@media (max-width: 992px) {
    .derniers-arrivants-grid-container {
        grid-template-columns: repeat(3, 1fr);
    }
}
@media (max-width: 768px) {
    .derniers-arrivants-grid-container {
        grid-template-columns: repeat(2, 1fr);
    }
}
@media (max-width: 480px) {
    .derniers-arrivants-grid-container {
        grid-template-columns: repeat(1, 1fr);
    }
}
</style>


<main>

    <section class="derniers-arrivants-container">
        <h1>Commerces Ã  {{ ville }} pour la catÃ©gorie : {{ category }}</h1>

        {% if message %}
            <p>{{ message }}</p>
        {% endif %}

        <div class="derniers-arrivants-grid-container">
            {% for commerce in commerces %}
                <div class="derniers-arrivants-grid-commerces">
                    <a href="{% url 'store_details' departement=commerce.departement ville=commerce.ville slug=commerce.slug %}"
                       rel="noopener">

                        {% if commerce.photo %}
                            <img src="{{ commerce.photo.url }}" alt="Photo de {{ commerce.nom }}">
                        {% else %}
                            <img src="{% static 'placeholder.png' %}" alt="Pas de photo">
                        {% endif %}

                        <h4>{{ commerce.nom }}</h4>
                    </a>
                </div>
            {% empty %}
                <p>Aucun commerce trouvÃ© pour cette catÃ©gorie Ã  {{ ville }}.</p>
            {% endfor %}
        </div>
    </section>

    <hr class="hr-separator" />

</main>
{% endblock %}
